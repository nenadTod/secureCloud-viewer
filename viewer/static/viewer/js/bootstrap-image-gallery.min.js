!function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery","./blueimp-gallery"],t):t(window.jQuery,window.blueimp.Gallery)}(function(t,o){"use strict";t.extend(o.prototype.options,{useBootstrapModal:!0});var e=o.prototype.close,i=o.prototype.imageFactory;t.extend(o.prototype,{modalFactory:function(t,o,e,i){if(!this.options.useBootstrapModal||e)return i.call(this,t,o,e);var n=this,a=this.container.children(".modal"),r=a.clone().show().on("click",function(t){(t.target===r[0]||t.target===r.children()[0])&&(t.preventDefault(),t.stopPropagation(),n.close())}),l=i.call(this,t,function(t){o({type:t.type,target:r[0]}),r.addClass("in")},e);r.find(".modal-body").append(l);var d=window.screen.availWidth-50;if(l.height<l.width){var s=l.width+140,c=(d>s?s:d)+"px";r.find(".modal-dialog").css("width",c)}return r[0]},imageFactory:function(t,o,e){return this.modalFactory(t,o,e,i)},close:function(){this.container.find(".modal").removeClass("in"),e.call(this)}})});